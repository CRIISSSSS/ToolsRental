<ion-header class="header">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>ToolsRental</ion-title>
    <ion-buttons slot="end">
      <ion-icon slot="icon-only" name="location-outline"></ion-icon>
      <ion-icon slot="icon-only" name="person-outline" (click)="toggleMenu()" class="clickable"></ion-icon>
      <ion-icon (click)="carrito()" slot="icon-only" name="cart-outline"></ion-icon>
    </ion-buttons>
  </ion-toolbar>

  <!-- Menú del usuario -->
  <div class="user-menu" *ngIf="menuOpen">
    <ul>
      <li (click)="logout()">Cerrar sesión</li>
    </ul>
  </div>
</ion-header>

<ion-content>
  <!-- Barra de búsqueda -->
  <div class="search-bar">
    <ion-searchbar placeholder="¿Qué estás buscando?" (ionInput)="filtrarProductos($event)"></ion-searchbar>
  </div>

  <!-- Catálogo de productos -->
  <div *ngIf="productosFiltrados.length > 0; else noProductos" class="catalog">
    <div class="product" *ngFor="let producto of productosFiltrados">
      <img [src]="'/assets/images/default-tool.png'" alt="Imagen del producto" />
      <div class="product-details">
        <h3>{{ producto.nombre }}</h3>
        <p>{{ producto.descripcion }}</p>
        <p><strong>Precio:</strong> {{ producto.precio | currency }}</p>
        <p><strong>Stock:</strong> {{ producto.stock }}</p>
      </div>
      <ion-button (click)="agregarAlCarrito(producto)" [disabled]="producto.stock <= 0">
        Añadir al carrito
      </ion-button>
    </div>
  </div>

  <!-- Mensaje si no hay productos -->
  <ng-template #noProductos>
    <div class="no-products">
      <p>No se encontraron productos.</p>
    </div>
  </ng-template>
</ion-content>
